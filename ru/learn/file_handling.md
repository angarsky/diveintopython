> [!NOTE]
> Вы можете прочитать эту статью на сайте: https://diveintopython.org/ru/learn/file-handling

Python имеет множество встроенных функций и библиотек, которые облегчают работу с файлами, и в этой статье мы рассмотрим различные техники и лучшие практики обработки файлов в Python.

## Как Открыть Файлы в Python

С помощью Python вы можете легко читать и записывать файлы в систему. Чтобы прочитать файл в Python, можно использовать функцию `open()`.

### Чтение Файла

В Python файл можно прочитать с помощью функции `open()`. Следующий пример кода демонстрирует, как прочитать файл в Python:

```python
file = open('example.txt', 'r')
data = file.read()
print(data)
```

### Чтение Файла Построчно

Иногда вам может понадобиться прочитать файл построчно. Для этого вы можете использовать цикл `for`, чтобы пройтись по файлу построчно. Следующий код демонстрирует, как читать файл построчно на Python:

```python
file = open('example.txt', 'r')
for line in file:
    print(line)
```

### Обработка Ошибки `No Such File or Directory`

Не редкость столкнуться с ошибкой `No such file or directory` при работе с файлами в Python. Чтобы обработать эту ошибку, вы можете использовать блок `try` и `except`, чтобы перехватить ошибку и соответствующим образом обработать её. Следующий код демонстрирует, как обработать ошибку `No such file or directory` в Python:

```python
try:
    file = open('example.txt', 'r')
except FileNotFoundError:
    print("File not found!")
```

## Разные Режимы Работы с Файлами в Python

В Python есть несколько режимов работы с файлами (режимы открытия файлов), в том числе:

- **Режим чтения ('r')**: Этот режим используется для чтения существующего файла.

- **Режим записи ('w')**: Этот режим используется для записи в файл. Если файл не существует, будет создан новый, а если существует, файл будет перезаписан.

- **Режим дополнения ('a')**: Этот режим используется для добавления новых данных в конец существующего файла (добавление в файл). Если файл не существует, будет создан новый.

- **Бинарный режим ('b')**: Этот режим используется для чтения или записи бинарных данных, например, изображений или аудиофайлов.

### Открыть Файл в Режиме Записи

```python
file = open('example.txt', 'w')

# Write to the file
file.write('Hello, World!')

# Close the file
file.close()
```

В этом примере мы сначала открываем файл с именем `example.txt` в режиме записи. Мы записываем строку `'Hello, World!'` в файл, а затем закрываем его.

### Открыть Файл в Режиме Чтения

```python
file = open('example.txt', 'r')

# Read the file contents
content = file.read()

# Print the contents
print(content)

# Close the file
file.close()
```

В этом примере мы открываем тот же файл, `example.txt`, но на этот раз в режиме чтения. Мы читаем содержимое файла с помощью метода `read()`, сохраняем его в переменной под названием `content`, а затем выводим содержимое в консоль. Наконец, мы `close()` файл.

## Операции с Файлами

Python предоставляет важные модули, такие как `os` и `shutil`, для выполнения операций с файлами, таких как удаление, переименование, копирование и перемещение файлов.

### Удаление Файла

Вы можете использовать метод `os.remove()`, чтобы удалить файл в Python. Следующий фрагмент кода показывает, как удалить файл с именем `example.txt`.

```python
import os

os.remove("example.txt")
```

### Переименование Файла

Вы можете использовать метод `os.rename()` для переименования файла в Python. Следующий фрагмент кода показывает, как переименовать файл с именем `example.txt` в `new_example.txt`.

```python
import os

os.rename("example.txt", "new_example.txt")
```

### Копирование Файла

Вы можете использовать метод `shutil.copy()` для копирования файла в Python. Приведенный ниже фрагмент кода показывает, как скопировать файл с именем `example.txt` в новый файл с именем `new_example.txt`.

```python
import shutil

shutil.copy("example.txt", "new_example.txt")
```

### Перемещение Файлов

Вы можете использовать метод `shutil.move()` для перемещения файла в Python. Следующий фрагмент кода показывает, как переместить файл с именем `example.txt` в новое место под названием `new_folder`.

```python
import shutil

shutil.move("example.txt", "/path/to/new_folder/example.txt")
```

## Методы Работы с Файлами в Python

При работе с файлами в Python существует несколько встроенных методов, которые позволяют читать, записывать и манипулировать содержимым файлов. Эти методы предоставляют гибкие варианты для обработки файлов. Вот руководство по некоторым часто используемым методам работы с файлами в Python:

### Как Прочитать Файл

Метод `read()` читает всё содержимое файла и возвращает его в виде строки. С другой стороны, метод `readline()` читает одну строку из файла. Он возвращает строку и перемещает указатель файла на следующую строку.

```python
file = open("example.txt", "w")
content = file.read()
line = file.readline()
file.close()
```

### Как Записать в Файл

Метод `write()` используется для записи данных в файл. Он принимает строку в качестве аргумента и записывает ее в файл. В качестве альтернативы, метод `writelines()` позволяет записывать несколько строк в файл, предоставив список строк.

```python
file = open("example.txt", "w")
file.write("Hello, World!")
lines = ["Line 1", "Line 2", "Line 3"]
file.writelines(lines)
file.close()
```

### Как Закрыть Файл

Метод `close()` необходим для правильной работы с файлами. Он закрывает файл и освобождает все системные ресурсы, связанные с ним. Важно закрыть файл после выполнения операций с ним, чтобы избежать потенциальных проблем.

```python
file = open("example.txt", "w")
# Perform operations on the file
file.close()
```

Это всего лишь несколько примеров методов работы с файлами в Python, которые позволяют читать, записывать и управлять файлами. Важно правильно обрабатывать исключения и закрывать файлы, чтобы обеспечить эффективное управление файлами и использование ресурсов. Эффективно используя эти методы, вы можете с легкостью выполнять операции с файлами в своих программах на Python.

## Операции с Размером Файла

Чтобы получить размер файла в Python, вы можете использовать различные методы, предоставляемые стандартной библиотекой Python. Вот два примера, которые демонстрируют как получить размер файла разными способами.

### Как Получить Размер Файла

Модуль `os.path` предоставляет удобный метод, `getsize()`, для получения размера файла в байтах.

```python
import os

file_path = "example.txt"

try:
    file_size = os.path.getsize(file_path)
    print("File size:", file_size, "bytes")
except FileNotFoundError:
    print("File not found.")
```

В этом примере мы используем функцию `getsize()` из модуля `os.path`, чтобы получить размер файла, указанного в `file_path`. Если файл найден, его размер выводится в байтах. Если файл не найден, генерируется исключение `FileNotFoundError`.

### Получение Размера Файла с Помощью Функции `os.stat`

Другой способ получить размер файла — использовать функцию `os.stat()`, которая возвращает именованный кортеж, содержащий атрибуты файла, включая размер файла.

```python
import os

file_path = "example.txt"

try:
    file_stats = os.stat(file_path)
    file_size = file_stats.st_size
    print("File size:", file_size, "bytes")
except FileNotFoundError:
    print("File not found.")
```

В этом примере мы вызываем `os.stat()`, чтобы получить атрибуты файла, включая размер, к которому можно обратиться, используя атрибут `st_size` возвращаемого именованного кортежа.

Используя эти подходы, вы можете легко получить размер файла на Python. Не забудьте обработать исключения, такие как `FileNotFoundError`, чтобы учесть случаи, когда файл не существует.

## Операции с Расширением Файла

Когда вы работаете с файлами на Python, вам часто может понадобиться извлечь расширение файла, чтобы определить тип файла, с которым вы имеете дело. Python предоставляет несколько способов получить расширение файла из имени файла или пути.

```python
import os

filename = "example.txt"
extension = os.path.splitext(filename)[1]

print("File Extension:", extension)
```

В этом примере мы используем модуль `os.path`, а точнее функцию `splitext()`, чтобы отделить расширение файла от заданного имени файла. Она возвращает кортеж, содержащий базовое имя и расширение, и мы извлекаем `extension`, используя индексацию.

## Как Проверить Существование Файла с Помощью Python

Чтобы проверить, существует ли файл, вы можете использовать встроенный модуль [os](https://docs.python.org/3/library/os.html), который предоставляет функциональность для взаимодействия с операционной системой.

```python
import os

# Define the path of the file to check
file_path = "/path/to/file"

# Check if the file exists
if os.path.exists(file_path):
    print("File exists!")
else:
    print("File does not exist.")
```

В этом примере мы сначала `import` модуль `os`, а затем определяем переменную `file_path` с путем к файлу, который мы хотим проверить. Функция `os.path.exists()` используется для проверки существования файла, и если файл существует, мы `print` сообщение, указывающее на то, что файл существует. Если файла не существует, мы `print` сообщение, указывающее на то, что файла не существует.

```python
import os

# Define the path of the file to check
file_path = "/path/to/file"

try:
    # Check if the file exists
    with open(file_path) as f:
        print("File exists!")
except FileNotFoundError:
    print("File does not exist.")
```

В этом примере мы используем блоки `try` и `except` для перехвата исключения `FileNotFoundError`, которое возникает, если файл не существует. Мы пытаемся открыть файл: `with open(file_path) as f:`, и если файл существует, мы `print` сообщение, указывающее на то, что файл существует. Если файла не существует, мы перехватываем исключение `FileNotFoundError` и `print` сообщение, указывающее на то, что файла не существует.

Используя один из этих двух примеров кода, вы можете легко проверить, существует ли файл в Python, и принять соответствующие действия в зависимости от результата.

## Как Создать Простой Файл

Чтобы создать файл в Python, используйте встроенную функцию `open()`. Вы можете указать имя файла и режим, в котором хотите открыть файл (чтение, запись или добавление).

Чтобы напечатать в файл в Python, вы можете использовать функцию `print()` с параметром `file`:

```python
with open("example.txt", "w") as file:
  print("Hello, World!", file=file)
```

Этот код создает новый файл с именем `example.txt` в режиме записи и записывает в файл строку `Hello, World!`.

Чтобы записать в файл на Python, вы можете использовать метод `.write()`:

```python
with open("example.txt", "w") as file:
  file.write("Hello, World!")
```

Этот код создает новый файл с именем `example.txt` в режиме записи и записывает в файл строку `Hello, World!` с использованием метода `write()`.

Не забудьте закрыть файл после завершения записи. Использование оператора `with` автоматически обрабатывает это.
